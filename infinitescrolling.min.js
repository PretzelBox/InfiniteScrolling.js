/*
 * InfiniteScrolling.js by Joah Gerstenberg
 */
(function($){$.fn.infiniteScroll=function($scope){var options={onclick:$scope.onclick?$scope.onclick:!1,selector:$scope.selector?$scope.selector:$(this).selector,loader:$scope.loader?$scope.loader:!1,layoutid:$scope.layoutid?$scope.layoutid:!1};var $this=$(this) function parseQuery(){var ar=location.search.match(/(?|&).[^?&]*/gi);var obj={};for(var i=0;i<ar.length;i++){var temp=ar[i].substr(1,ar[i].length-1).split('=');obj[temp[0]]=temp[1]} return obj} function compileQuery(o){var temp=parseQuery();for(k in o){temp[k]=o[k]} return'?'+$.param(temp)} var loaded={};var current=parseInt((function(){if(parseQuery()['pi']){return parseQuery()['pi']} return'1'})(),10);var keepGoing=!0;function loadNext(isInitial){if(!keepGoing){$('.async-helper').remove();return!1} var nextPage=(function(){if(isInitial){return current+1}else if(parseQuery()['asyncpi']){return parseInt(parseQuery()['asyncpi'],10)+1}else{return 2}})();if(loaded[nextPage]){return!1} if(!isInitial){if(!options.onclick){$this.append('<div class="async-helper" style="height:1000px"></div>')}else if(options.onclick&&options.loader){$(options.onclick).after('<img class="async-helper loading-gif m-l-10" src="'+options.loader+'" alt="loading..." />')}} loaded[nextPage]=!0;current=nextPage;if(!isInitial){var newPath=location.pathname+compileQuery({asyncpi:nextPage});window.history.replaceState({path:newPath},'',newPath)} $.ajax({url:location.pathname+compileQuery({pi:nextPage,previewlayoutid:options.layoutid?options.layoutid:parseQuery()['previewlayoutid']?parseQuery.previewlayoutid:''}),type:'GET',dataType:'html',success:function(d){var pl=$(d).find(options.selector);$('.async-helper').remove();if(pl.html()){$this.append(pl.html());$(document).trigger('ajaxLoad')}else{keepGoing=!1;var newPath=location.pathname+compileQuery({asyncpi:parseInt(parseQuery()['asyncpi'],10)-1});window.history.replaceState({path:newPath},'',newPath)}},error:function(d){window.console.log(d)}})} function loadTo(pi){for(var i=0;i<(pi-current);i++){setTimeout(function(){loadNext(!0)},150*i)}} if(options.onclick){$(document).on('click',options.onclick,function(e){e.preventDefault();loadNext()})}else{$(window).scroll(function(){if(($this.offset().top+$this.height())-($(window).scrollTop()+$(window).height())<$this.find('.row').last().height()){loadNext()}})} $(document).ready(function(){$('[id*=lblProductCountTop]').each(function(){$(this).parent().attr('style','display: none !important;')});$('[id*=lblNumPerPageDropDownLabel]').each(function(){$(this).parent().attr('style','display: none !important;')});$('ul.pagination').each(function(){$(this).parent().parent().attr('style','display: none !important;')});if(parseQuery()['asyncpi']){loadTo(parseInt(parseQuery()['asyncpi'],10))}})}})(jQuery)