/*
 * InfiniteScrolling.js by Joah Gerstenberg
 */
!function(a){a.fn.infiniteScroll=function(b){function e(){for(var a=location.search.match(/(\?|&).[^\?&]*/gi),b={},c=0;c<a.length;c++){var d=a[c].substr(1,a[c].length-1).split("=");b[d[0]]=d[1]}return b}function f(b){var c=e();for(k in b)c[k]=b[k];return"?"+a.param(c)}function j(b){if(!i)return a(".async-helper").remove(),!1;var j=function(){return b?h+1:e().asyncpi?parseInt(e().asyncpi,10)+1:2}();if(g[j])return!1;if(b||(c.onclick?c.onclick&&c.loader&&a(c.onclick).after('<img class="async-helper loading-gif m-l-10" src="'+c.loader+'" alt="loading..." />'):d.append('<div class="async-helper" style="height:1000px"></div>')),g[j]=!0,h=j,!b){var k=location.pathname+f({asyncpi:j});window.history.replaceState({path:k},"",k)}a.ajax({url:location.pathname+f({pi:j,previewlayoutid:c.layoutid?c.layoutid:e().previewlayoutid?e.previewlayoutid:""}),type:"GET",dataType:"html",success:function(b){var g=a(b).find(c.selector);if(a(".async-helper").remove(),g.html())d.append(g.html()),a(document).trigger("ajaxLoad");else{i=!1;var h=location.pathname+f({asyncpi:parseInt(e().asyncpi,10)-1});window.history.replaceState({path:h},"",h)}},error:function(a){window.console.log(a)}})}function l(a){for(var b=0;a-h>b;b++)setTimeout(function(){j(!0)},150*b)}var c={onclick:b.onclick?b.onclick:!1,selector:b.selector?b.selector:a(this).selector,loader:b.loader?b.loader:!1,layoutid:b.layoutid?b.layoutid:!1},d=a(this),g={},h=parseInt(function(){return e().pi?e().pi:"1"}(),10),i=!0;c.onclick?a(document).on("click",c.onclick,function(a){a.preventDefault(),j()}):a(window).scroll(function(){d.offset().top+d.height()-(a(window).scrollTop()+a(window).height())<d.find(".row").last().height()&&j()}),a(document).ready(function(){a("[id*=lblProductCountTop]").each(function(){a(this).parent().attr("style","display: none !important;")}),a("[id*=lblNumPerPageDropDownLabel]").each(function(){a(this).parent().attr("style","display: none !important;")}),a("ul.pagination").each(function(){a(this).parent().parent().attr("style","display: none !important;")}),e().asyncpi&&l(parseInt(e().asyncpi,10))})}}(jQuery);